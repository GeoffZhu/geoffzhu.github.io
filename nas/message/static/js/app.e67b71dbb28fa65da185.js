webpackJsonp([1],{"7gC8":function(t,e){},"9n10":function(t,e){},LlAV:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={};n.d(a,"dateTimeFormatter",function(){return I});var s=n("fZjL"),r=n.n(s),i=(n("7gC8"),n("9n10"),n("slWF"),n("nuQn"),n("7+uW")),o=n("zL8q"),c=n.n(o),l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]},u=n("VU/8")({name:"App",created:function(){}},l,!1,null,null,null).exports,d=n("Y81h"),f=n.n(d),p=n("/ocq"),h=n("Xxa5"),v=n.n(h),m=n("exGp"),g=n.n(m),_={name:"locked",data:function(){return{address:"n1GHhGZ8PhZsYHfSSzbEdYHVNxE2esXBeLf"}},methods:{onConfirmClick:function(){var t=this;return g()(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.address?(store.address=t.address,t.$router.push({name:"list"})):t.$message("请输入地址");case 1:case"end":return e.stop()}},e,t)}))()}}},b={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("img",{staticClass:"banner",attrs:{src:"http://o80ronwlu.bkt.clouddn.com/banner.jpg",alt:"banner"}}),t._v(" "),n("el-input",{staticClass:"address-input",attrs:{"auto-complete":"off",type:"text",placeholder:"请输入您的钱包地址"},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}}),t._v(" "),n("el-button",{staticClass:"unlock-btn",attrs:{type:"primary"},nativeOn:{click:function(e){return t.onConfirmClick(e)}}},[t._v("进入星云消息")])],1)},staticRenderFns:[]};var x,w=n("VU/8")(_,b,!1,function(t){n("Ue67")},"data-v-18efe7ec",null).exports,k=n("//Fk"),C=n.n(k),y=n("mvHQ"),E=n.n(y),$=(x=g()(v.a.mark(function t(){var e;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,neb.api.getAccountState(store.address);case 2:return(e=t.sent).balanceNas=Unit.fromBasic(e.balance,"nas"),t.abrupt("return",e);case 5:case"end":return t.stop()}},t,this)})),function(){return x.apply(this,arguments)});var D,G,A,S=(D=g()(v.a.mark(function t(){var e;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$();case 2:return e=t.sent,t.abrupt("return",neb.api.call({from:store.address,to:store.contractAdddress,value:0,nonce:e.nonce,gasPrice:store.gasPrice,gasLimit:"200000",contract:{function:"getDiaryList",args:E()([100,0])}}).then(function(t){return JSON.parse(t.result)}));case 4:case"end":return t.stop()}},t,this)})),function(){return D.apply(this,arguments)}),P=(G=g()(v.a.mark(function t(e){var n;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$();case 2:return n=t.sent,t.abrupt("return",neb.api.call({from:store.address,to:store.contractAdddress,value:0,nonce:n.nonce,gasPrice:store.gasPrice,gasLimit:"200000",contract:{function:"getDiary",args:E()([e])}}).then(function(t){return JSON.parse(t.result)}));case 4:case"end":return t.stop()}},t,this)})),function(t){return G.apply(this,arguments)}),N=(A=g()(v.a.mark(function t(e,n){var a;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$();case 2:return a=t.sent,t.abrupt("return",neb.api.call({from:store.address,to:store.contractAdddress,value:0,nonce:Number(a.nonce)+1,gasPrice:store.gasPrice,gasLimit:"200000",contract:{function:"setDiary",args:E()([{title:e,content:n}])}}));case 4:case"end":return t.stop()}},t,this)})),function(t,e){return A.apply(this,arguments)});function O(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new C.a(function(n,a){var s=store.contractAdddress,r=E()([{title:t,content:e}]);window.nebPay.call(s,"0","setDiary",r,{listener:function(t){n(t)}})})}var F={name:"list",data:function(){return{loading:!0,list:[]}},created:function(){var t=this;return g()(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:t.list=e.sent,t.loading=!1;case 4:case"end":return e.stop()}},e,t)}))()},methods:{onItemClick:function(t){this.$router.push({path:"detail",query:{title:t}})}}},L={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"content"},[n("div",{staticClass:"btn-wrapper"},[t._m(0),t._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){t.$router.push({name:"add"})}}},[t._v("发一条")])],1),t._v(" "),t._l(t.list,function(e){return n("div",{key:e.index,staticClass:"title-wrapper",on:{click:function(n){t.onItemClick(e.title)}}},[n("h1",{staticClass:"title"},[t._v(t._s(e.title))])])}),t._v(" "),0===t.list.length?n("div",{staticClass:"empty"},[n("p",[t._v("还没有消息，发一条吧")])]):t._e()],2),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h1",{staticClass:"title"},[this._v("星云消息")]),e("span",[this._v("永不会被删除的消息平台")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("footer",{staticClass:"footer"},[e("div",[this._v("© 2018 "),e("a",{attrs:{href:"https://nebulas.io/"}},[this._v("星云链智能合约")]),this._v(" 强力驱动")]),this._v(" "),e("div",[e("a",{attrs:{href:"https://github.com/GeoffZhu/nebulas-message",target:"_blank"}},[this._v("Github")])])])}]};var T=n("VU/8")(F,L,!1,function(t){n("wx4i")},"data-v-7338b8a1",null).exports,U={name:"detail",data:function(){return{loading:!0,title:"",content:""}},created:function(){var t=this;return g()(v.a.mark(function e(){var n,a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$route.query.title,e.next=3,P(n);case 3:a=e.sent,t.title=a.title,t.content=a.content,t.loading=!1;case 7:case"end":return e.stop()}},e,t)}))()},methods:{}},M={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"content"},[n("h1",[t._v(t._s(t.title))]),t._v(" "),n("p",[t._v(t._s(t.content))])]),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("footer",{staticClass:"footer"},[e("div",[this._v("© 2018 "),e("a",{attrs:{href:"https://nebulas.io/"}},[this._v("星云链智能合约")]),this._v(" 强力驱动")]),this._v(" "),e("div",[e("a",{attrs:{href:"https://github.com/GeoffZhu/nebulas-message",target:"_blank"}},[this._v("Github")])])])}]};var R=n("VU/8")(U,M,!1,function(t){n("RTQI")},"data-v-0f721d11",null).exports,V={name:"add",data:function(){return{loading:!1,disabled:!0,estimateGas:0,title:"",content:"",txhash:"",noExtension:!1}},created:function(){"undefined"==typeof webExtensionWallet?this.noExtension=!0:this.noExtension=!1},methods:{onClickTestDeploy:function(){var t=this;return g()(v.a.mark(function e(){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,N(t.title,t.content);case 3:n=e.sent,t.loading=!1,'""'===n.result&&(t.$message({message:"测试成功，发布需要花费GAS "+n.estimate_gas,type:"success"}),t.estimateGas=n.estimate_gas,t.disabled=!1);case 6:case"end":return e.stop()}},e,t)}))()},onClickDeploy:function(){var t=this;return g()(v.a.mark(function e(){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,O(t.title,t.content,t.estimateGas);case 4:n=e.sent,t.$message({message:"发布成功，等待区块接受中...",type:"success"}),t.txhash=n.txhash,t.$alert("\n          发布成功，需要等到星云链主网接受本次交易后，才会在列表页中显示出来。\n          ","发布成功",{confirmButtonText:"OK"}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),t.$message({message:"发布失败，请检查您的是否有足够的余额支付手续费（GAS）",type:"error"});case 14:t.loading=!1;case 15:case"end":return e.stop()}},e,t,[[1,10]])}))()}}},H={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"content"},[t.noExtension?n("p",[t._v("NOTE: Please install "),n("a",{attrs:{target:"_blank",href:"https://github.com/ChengOrangeJu/WebExtensionWallet"}},[t._v("WebExtensionWallet")]),t._v(" to use 星云消息")]):t._e(),t._v(" "),n("el-input",{attrs:{placeholder:"请输入标题",disabled:!t.disabled},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t._v(" "),n("el-input",{staticClass:"mt10",attrs:{type:"textarea",rows:10,placeholder:"请输入内容",disabled:!t.disabled},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v(" "),n("div",{staticClass:"btn-wrapper"},[n("el-button",{staticClass:"ml10",attrs:{type:"primary",disabled:t.disabled},nativeOn:{click:function(e){return t.onClickDeploy(e)}}},[t._v("发布")]),t._v(" "),n("el-button",{attrs:{type:"primary",disabled:!t.disabled},nativeOn:{click:function(e){return t.onClickTestDeploy(e)}}},[t._v("计算发布需花费GAS")]),t._v(" "),t.txhash?n("p",{staticClass:"hash"},[n("i",{staticClass:"el-icon-warning mr10"}),t._v("txhash:"+t._s(t.txhash))]):t._e()],1)],1),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("footer",{staticClass:"footer"},[e("div",[this._v("© 2018 "),e("a",{attrs:{href:"https://nebulas.io/"}},[this._v("星云链智能合约")]),this._v(" 强力驱动")]),this._v(" "),e("div",[e("a",{attrs:{href:"https://github.com/GeoffZhu/nebulas-message",target:"_blank"}},[this._v("Github")])])])}]};var W=n("VU/8")(V,H,!1,function(t){n("LlAV")},"data-v-36e26745",null).exports;f.a.configure({showSpinner:!1}),i.default.use(p.a);var J=new p.a({routes:[{path:"/locked",name:"locked",component:w},{path:"/list",name:"list",component:T},{path:"/detail",name:"detail",component:R},{path:"/add",name:"add",component:W}]});J.beforeEach(function(t,e,n){f.a.start(),"/locked"!==t.path?store.address?n():n("/locked"):n(),f.a.done()});var q=J;function I(t,e){if(!t||""==t)return"";if(t.toString().length<13&&(t*=1e3),"string"==typeof t){var n=t.match(/(\/Date\((\d+)\)\/)/);n&&n.length>=3&&(t=parseInt(n[2]))}if(!(t=new Date(t))||"Invalid Date"==t.toUTCString())return"";var a={M:t.getMonth()+1,d:t.getDate(),h:t.getHours(),m:t.getMinutes(),s:t.getSeconds(),q:Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};return e=e.replace(/([yMdhmsqS])+/g,function(e,n){var s=a[n];return void 0!==s?(e.length>1&&(s=(s="0"+s).substr(s.length-2)),s):"y"===n?(t.getFullYear()+"").substr(4-e.length):e})}i.default.config.productionTip=!1,i.default.use(c.a),r()(a).forEach(function(t){i.default.filter(t,a[t])}),window.store={address:"",contractAdddress:"n1mVyXb1DswgimoRUJsLER4JDDHKiuvgJgn"},neb.api.gasPrice().then(function(t){store.gasPrice=t.gas_price,new i.default({el:"#app",router:q,components:{App:u},template:"<App/>"})}).catch(function(t){console.error(t),Object(o.MessageBox)("网络错误，请检查您的网络","错误",{confirmButtonText:"确定"})})},RTQI:function(t,e){},Ue67:function(t,e){},nuQn:function(t,e){},slWF:function(t,e){},wx4i:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.e67b71dbb28fa65da185.js.map