<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Geoff的博客 | Geoff&#39;s Blog</title>
  
  <meta name="description" content="node项目部署上线 - Geoff的博客 | Geoff&#39;s Blog">
  
  <meta name="keyword" content="前端 js">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="stylesheet" href="/blog/css/style.css">
  
</head>

<body>
  <div class="container">
    <div class="content">
      <div><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>写了两个月的node项目，开发时候一直用 supervisor来当个watcher， 到部署的时候，用什么，开始在cnode找啊找，果然发现神器forever，<br>当初我的启动命令是这样的<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NODE_ENV=production forever start --minUptime <span class="number">1000</span> --spinSleepTime <span class="number">1000</span> -l forever.log -a -o ./log/out.log -e ./log/err.log ./bin/www</span><br></pre></td></tr></table></figure></p>
<p>总觉得怪怪的，内存占用实时看不到，log也不是那么方便的能看到。用了几天，继续在<br>cnode寻宝，然后发现了pm2</p>
<table><thead><br><tr><br><th>Feature</th><br><th style="text-align:center">Forever</th><br><th style="text-align:right">PM2</th><br></tr><br></thead><br><tbody><br><tr><br><td>Keep Alive</td><br><td style="text-align:center">✔</td><br><td style="text-align:right">✔</td><br></tr><br><tr><br><td>Coffeescript</td><br><td style="text-align:center">✔</td><br><td style="text-align:right"></td><br></tr><br><tr><br><td>Log aggregation</td><br><td style="text-align:center"></td><br><td style="text-align:right">✔</td><br></tr><br><tr><br><td>API</td><br><td style="text-align:center"></td><br><td style="text-align:right">✔</td><br></tr><br><tr><br><td>Terminal monitoring</td><br><td style="text-align:center"></td><br><td style="text-align:right">✔</td><br></tr><br><tr><br><td>Clustering</td><br><td style="text-align:center"></td><br><td style="text-align:right">✔</td><br></tr><br><tr><br><td>JSON configuration</td><br><td style="text-align:center"></td><br><td style="text-align:right">✔</td><br></tr><br></tbody><br></table>

<p>比forever要强大许多</p>
<h3 id="常用指令"><a href="#常用指令" class="headerlink" title="常用指令"></a>常用指令</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">pm2 start app.js <span class="comment">//启动应用  可以加 -i 4 ，表示启动多少个进程，内建负载均衡</span></span><br><span class="line">pm2 list <span class="comment">//列出所有应用</span></span><br><span class="line">pm2 monit <span class="comment">//监视查看资源消耗</span></span><br><span class="line">pm2 describe [app id] <span class="comment">//查看某一个应用状态</span></span><br><span class="line">pm2 logs <span class="comment">//查看所有日志</span></span><br><span class="line">pm2 restart [app id] <span class="comment">//重启应用</span></span><br><span class="line">pm2 stop [app id] <span class="comment">//停止应用</span></span><br><span class="line">pm2 web <span class="comment">//开启api访问</span></span><br></pre></td></tr></table></figure></div>
<div class="page-date">2016-07-27</div>
    </div>
    <footer class="footer">
  <div>&copy; 2018 Geoff Zhu</div>
  <div>
    
      
        <a href="/blog//about" target="">About</a>
      
    
      
        <a href="https://github.com/GeoffZhu" target="_blank">Github</a>
      
    
      
        <a href="https://www.zhihu.com/people/geoffzhu/activities" target="_blank">Zhihu</a>
      
    
      
        <a href="https://weibo.com/geoffzhu" target="_blank">Weibo</a>
      
    
  </div>
</footer>
  </div>
</body>
</html>